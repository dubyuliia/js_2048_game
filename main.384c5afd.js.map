{"version":3,"sources":["scripts/main.js"],"names":["messageStart","document","querySelector","messageWin","messageLose","showMessage","message","classList","remove","hideMessage","add","cell","num","row","score","rows","columns","field","getElementById","r","c","createElement","id","toString","updateTile","append","tile","numer","innerText","value","filterZero","arrRow","filter","number","slide","i","length","push","slideLeft","originalRow","slice","hasValue","hasEmptyTile","arraysEqual","slideRight","reverse","slideUp","slideDown","setNumber","found","Math","floor","random","randomNumber","arr1","arr2","startButton","clearField","updateScore","addEventListener","e","prevField","JSON","parse","stringify","code"],"mappings":"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","file":"main.384c5afd.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst messageStart = document.querySelector('.message-start');\nconst messageWin = document.querySelector('.message-win');\nconst messageLose = document.querySelector('.message-lose');\n\nfunction showMessage(message) {\n  message.classList.remove('hidden');\n};\n\nfunction hideMessage(message) {\n  message.classList.add('hidden');\n}\n\nlet score = 0;\nlet cell;\nlet num;\nlet row;\nconst rows = 4;\nconst columns = 4;\n\nlet field = document.getElementById('field');\n\nfield = [\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n];\n\nfor (let r = 0; r < rows; r++) {\n  for (let c = 0; c < columns; c++) {\n    cell = document.createElement('div');\n\n    cell.id = r.toString() + '-' + c.toString();\n\n    num = field[r][c];\n\n    updateTile(cell, num);\n    document.getElementById('field').append(cell);\n  }\n}\n\nfunction updateTile(tile, numer) {\n  cell = tile;\n  num = numer;\n  cell.innerText = '';\n  cell.classList.value = '';\n  cell.classList.add('field-cell');\n\n  if (num > 0) {\n    cell.innerText = num;\n\n    if (num <= 1024) {\n      cell.classList.add('field-cell--' + num.toString());\n    } else {\n      cell.classList.add('field-cell--2048');\n    }\n  }\n}\n\nfunction filterZero(arrRow) {\n  return arrRow.filter(number => number !== 0);\n}\n\nfunction slide(arrRow) {\n  row = filterZero(arrRow);\n\n  for (let i = 0; i < row.length - 1; i++) {\n    if (row[i] === row[i + 1]) {\n      row[i] *= 2;\n      score += row[i];\n      row[i + 1] = 0;\n    }\n  }\n\n  row = filterZero(row);\n\n  while (row.length < columns) {\n    row.push(0);\n  }\n\n  return row;\n}\n\nfunction slideLeft() {\n  let originalRow;\n\n  for (let r = 0; r < rows; r++) {\n    row = field[r];\n\n    originalRow = row.slice();\n\n    field[r] = slide(row);\n\n    for (let c = 0; c < columns; c++) {\n      cell = document.getElementById(r.toString() + '-' + c.toString());\n      num = field[r][c];\n      updateTile(cell, num);\n    }\n  }\n\n  if (hasValue(2048)) {\n    showMessage(messageWin);\n    hideMessage(messageStart);\n  }\n\n  if (!hasEmptyTile() && !arraysEqual(originalRow, row)) {\n    showMessage(messageLose);\n    hideMessage(messageStart);\n  }\n}\n\nfunction slideRight() {\n  let originalRow;\n\n  for (let r = 0; r < rows; r++) {\n    row = field[r].reverse();\n\n    originalRow = row.slice();\n\n    field[r] = slide(row).reverse();\n\n    for (let c = 0; c < columns; c++) {\n      cell = document.getElementById(r.toString() + '-' + c.toString());\n      num = field[r][c];\n      updateTile(cell, num);\n    }\n  }\n\n  if (hasValue(2048)) {\n    hideMessage(messageStart);\n    showMessage(messageWin);\n  }\n\n  if (!hasEmptyTile() && !arraysEqual(originalRow, row)) {\n    showMessage(messageLose);\n    hideMessage(messageStart);\n  }\n}\n\nfunction slideUp() {\n  let originalRow;\n\n  for (let c = 0; c < columns; c++) {\n    row = [field[0][c], field[1][c], field[2][c], field[3][c]];\n\n    originalRow = row.slice();\n\n    row = slide(row);\n\n    for (let r = 0; r < rows; r++) {\n      field[r][c] = row[r];\n      cell = document.getElementById(r.toString() + '-' + c.toString());\n      num = field[r][c];\n      updateTile(cell, num);\n    }\n  }\n\n  if (hasValue(2048)) {\n    showMessage(messageWin);\n    hideMessage(messageStart);\n  }\n\n  if (!hasEmptyTile() && !arraysEqual(originalRow, row)) {\n    showMessage(messageLose);\n    hideMessage(messageStart);\n  }\n}\n\nfunction slideDown() {\n  let originalRow;\n\n  for (let c = 0; c < columns; c++) {\n    originalRow = row.slice();\n\n    row = [field[0][c], field[1][c], field[2][c], field[3][c]].reverse();\n\n    row = slide(row).reverse();\n\n    for (let r = 0; r < rows; r++) {\n      field[r][c] = row[r];\n      cell = document.getElementById(r.toString() + '-' + c.toString());\n      num = field[r][c];\n      updateTile(cell, num);\n    }\n  }\n\n  if (hasValue(2048)) {\n    showMessage(messageWin);\n    hideMessage(messageStart);\n  }\n\n  if (!hasEmptyTile() && !arraysEqual(originalRow, row)) {\n    showMessage(messageLose);\n    hideMessage(messageStart);\n  }\n}\n\nfunction setNumber() {\n  if (!hasValue(0)) {\n    return;\n  }\n\n  let found = false;\n\n  while (!found) {\n    const r = Math.floor(Math.random() * rows);\n    const c = Math.floor(Math.random() * columns);\n\n    if (field[r][c] === 0) {\n      const randomNumber = Math.random();\n\n      field[r][c] = randomNumber < 0.9 ? 2 : 4;\n\n      cell = document.getElementById(r.toString() + '-' + c.toString());\n\n      cell.innerText = field[r][c].toString();\n      cell.classList.add('field-cell--' + field[r][c].toString());\n      found = true;\n    }\n  }\n}\n\nfunction hasEmptyTile() {\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      if (field[r][c] === 0) {\n        return true;\n      }\n    }\n  }\n\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      if (c < columns - 1 && field[r][c] === field[r][c + 1]) {\n        return true;\n      } else if (r < rows - 1 && field[r][c] === field[r + 1][c]) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }\n}\n\nfunction hasValue(value) {\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      if (field[r][c] === value) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction arraysEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  };\n\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      if (arr1[r][c] !== arr2[r][c]) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n\nconst startButton = document.querySelector('.button.start');\n\nstartButton.addEventListener('click', () => {\n  document.addEventListener('keyup', (e) => {\n    const prevField = JSON.parse(JSON.stringify(field));\n\n    if (e.code === 'ArrowLeft') {\n      slideLeft();\n    } else if (e.code === 'ArrowRight') {\n      slideRight();\n    } else if (e.code === 'ArrowUp') {\n      slideUp();\n    } else if (e.code === 'ArrowDown') {\n      slideDown();\n    }\n\n    document.querySelector('.game-score').innerText = score;\n\n    const fieldChanged = !arraysEqual(prevField, field);\n\n    if (fieldChanged) {\n      setNumber();\n    }\n  });\n\n  clearField();\n  hideMessage(messageWin);\n  hideMessage(messageLose);\n  hideMessage(messageStart);\n\n  startButton.classList.value = '';\n  startButton.classList.add('button', 'restart');\n  startButton.innerText = 'Restart';\n\n  score = 0;\n\n  field = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n\n  updateScore();\n  setNumber();\n  setNumber();\n});\n\nfunction clearField() {\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      cell = document.getElementById(r.toString() + '-' + c.toString());\n      cell.innerText = '';\n      cell.classList.value = '';\n      cell.classList.add('field-cell');\n    }\n  }\n}\n\nfunction updateScore() {\n  document.querySelector('.game-score').innerText = score;\n}\n"]}